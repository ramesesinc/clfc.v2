import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.common.*;
import com.rameses.services.extended.*;
import java.math.BigDecimal;

class WaterworksMeterService extends ActiveCrudListService {

	@ActiveDB(value='waterworks_meter', em="waterworks")
	def em;

	@ActiveDB(value='waterworks_meter_location', em="waterworks")
	def location;

	@Service('WaterworksMeterReadingService')
	def readingSvc;

	def getColumns(params){
		return [
			[name:'serialno', caption:'Serial No'],
			[name:'brand', caption:'Brand'],
			[name:'capacity', caption:'Capacity'],
			[name:'size', caption:'Size']
		];
	}

	void beforeList(params){
		params.searchtext = params.searchtext ? params.searchtext : '%';
	}

	@ProxyMethod
	def getMeterInfo(params){
		return em.findMeterInfo(params);
	}

	@ProxyMethod
	def createLocation(params){
		return location.create(params);
	}

	@ProxyMethod
	def getLocation(params){
		return location.findLocation(params);
	}
}