<workunit extends="wtemplates/ListController.xml"  >
    <invokers>
         <invoker folderid="/explorer/master/mtop" caption="Franchises" index="4" />
         
         <invoker type="formAction" caption="View History" action ="viewHistory" /> 
    </invokers>
    <code>
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.osiris2.common.*;
        
        class FranchiseListController extends ListController {
                
            String serviceName = 'FranchiseService'
            String entityName = 'franchise'
            boolean allowOpen = false 
            
            @Service("UnitTypeService")
            def unittypeSvc 
            
            @PropertyChangeListener
            def listener = [
                "query.unittype" : { o->
                    listHandler.load()  
                },
                
                "query.showAvailableFranchise": {o->
                     listHandler.load()  
                }
            ]
            
            
            def getUnittypeList() {
                return unittypeSvc.getList([:]);
            }
            
            def viewHistory() {
                
            }
            
        }    
            
    </code>
    <pages>
        <page name="queryform" template="com.rameses.gov.etracs.mtop.franchise.FranchiseQueryForm"/> 
    </pages>
</workunit>